% //270:62
% //260:65
% //250:69
% //240:74
% //230:78
% //220:81
% //210:83
% //200:85


pkg load symbolic
syms t
f=fittype('60+40*(a1-t)*(a1-t)/(a1*a2)','independent','t','coefficients',{'a1','a2'});
cfun=fit(x,y,f)
xi=100:10:300;
yi=cfun(xi);
plot(x,y,'r*',xi,yi,'b-')

[P,S,mu]=polyfit(x,y,2)
p=polyfit(x,y,2)
xi=100:10:300;
yi=polyval(p,xi)
plot(xi,yi,'-*')

% y2 = -0.002.* xi .* xi + 0.57679 .* xi + 48.589 ;
% plot(t,y,':o',xi,yi,'-*')
% plot(xi,y2,'-*')


x=[200,210,220,230,240,250,260,270]
y=[85,83,81,78,74,69,65,62]
xi=100:10:370;

x=[210,220,230,240,250,260,270,280,290]
y=[105,100,95,82,78,73,72,70,69]
a1=0
y1 = a1 + (100-a1) * (370 - xi) .* (370 - xi) / (200 * 200);

% y3 = 66 + (100-66) * (310 - xi) .* (310 - xi) / (200 * 200);;
% y2 = 65 + (100-65) * (350 - xi) .* (350 - xi) / (210 * 210);;
56+(100-56)*(370-250)*(370-250)/(200*200)=71.84=72
63+(100-63)*(370-260)*(370-260)/(200*200)=74
69+(100-69)*(340-260)*(340-260)/(200*200)=74
72 row--> 36cm -- 250cm/s
k=250/36=
k=250/38=6.579
hold on
plot(xi,y3,'-*')
plot(xi,y2,'-*')
plot(xi,y1,'-*')
plot(x,y,'-o')

h=250
l=200
p=30
steer_error_ave=-80:5:80
speed_set = h - (h - l) .* (steer_error_ave .* steer_error_ave) / (p * p)
plot(steer_error_ave,speed_set,'-*')

row=[30, 36, 42, 48, 54, 60, 66, 72, 78, 84, 90, 96, 102,108,114,120]
% dis=[126,97,78,64,55,46,40,36,31,28,25,23, 21, 18, 16, 10]
dis=[146,111,85,71,59,51,44,37,33,30,27,24, 22, 19, 18, 13]
plot(row,dis,'-*')

spe=dis.*7.576;
plot(spe,row,'-*')
